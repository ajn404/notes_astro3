---
title: nature of code
pubDatetime: 2024-01-16T06:22:18Z
postSlug: nature of code
featured: true
draft: false
tags:
  - 代码的本质
  - p5
  - canvas
  - math
description: "代码的本质"
---

## 目录

## nature of code

我与p5的缘分真的蛮深的,DANIEL SHIFFMAN也算是我的编程启蒙老师了

### code template

<details>
<summary>template</summary>

import Template from "@components/react/p5/index.tsx";

<Template client:visible />

</details>

### 0. Randomness

`随机性` `柏林噪声` `概率`

<details>
<summary>RandomnessA</summary>
```tsx
step() {
        const choice = p.floor(p.random(4));
        switch (choice) {
          case 0:
            this.x++;
            break;
          case 1:
            this.x--;
            break;
          case 2:
            this.y++;
            break;
          case 3:
            this.y--;
            break;
          default:
            break;
        }
      }
```
import RandomnessA from "@components/react/p5/Randomness/RandomnessA.tsx";

<RandomnessA client:visible />
</details>

<details class="mt-4">
<summary>RandomnessB</summary>
```tsx
step() {
          let xStep = p.random(-1, 1);
          let yStep = p.random(-1, 1);

          this.x += xStep;
          this.y += yStep;

      }

````
import RandomnessB from "@components/react/p5/Randomness/RandomnessB.tsx";

<RandomnessB client:visible />
</details>

<details class="mt-4">
<summary>RandomnessC</summary>

import RandomnessC from "@components/react/p5/Randomness/RandomnessC.tsx";

<RandomnessC client:visible />
</details>

- Create a random walker that has a greater tendency to move down and to the right. (The solution follows in the next section.)

<details open>
<summary>Probability and Nonuniform Distributions
概率和非均匀分布</summary>
```ts
let stuff = [1,1,2,4,5,6,7,8,8,8,9,9,9,9,10];
let value = random(stuff);
console.log(value);
````

```ts
let probability = 0.1;
let r = random(1);
if (r < probability) {
  console.log("success");
}
```

</details>

<details class="mt-4">
<summary>RandomnessD  Tends to Move to the Right 趋于向右的随机分布</summary>

import RandomnessD from "@components/react/p5/Randomness/RandomnessD.tsx";

<RandomnessD client:visible />
</details>

<details class="mt-4">

<summary>上述例子使用鼠标交互，即使用mouseX,mouseY</summary>

import RandomnessE from "@components/react/p5/Randomness/RandomnessE.tsx";

<RandomnessE client:visible />
</details>

<details class="mt-4">
<summary>A Normal Distributions Of Random Numbers</summary>

import RandomnessF from "@components/react/p5/Randomness/RandomnessF.tsx";

<RandomnessF client:visible />

<details>
<summary>柯里化</summary>

```tsx
export default () => {
  const common = (p: p5, sd = 0.41) => {
    const heights = [];
    p.setup = () => {
      p.createCanvas(320, 240);
      p.background(255);
      const e = 2.71828183;
      let m = 0;
      for (let i = 0; i < p.width + 1; i++) {
        let xcoord = p.map(i, 0, p.width, -3, 3);
        let sq2pi = p.sqrt(2 * p.PI); //square root of 2 * PI
        let xmsq = -1 * (xcoord - m) * (xcoord - m); //-(x - mu)^2
        let sdsq = sd * sd; //variance (standard deviation squared)
        heights[i] = (1 / (sd * sq2pi)) * p.pow(e, xmsq / sdsq); //P(x) function
      }

      p.stroke(0);
      p.strokeWeight(2);
      p.noFill();
      p.beginShape();
      for (let i = 0; i < heights.length; i++) {
        let x = i;
        let y = p.map(heights[i], 0, 1, p.height - 2, 2);
        p.vertex(x, y);
      }
      p.endShape();
    };
  };
  const sketchA = (p: p5) => common(p, 0.41);
  const sketchB = (p: p5) => common(p, 1.5);

  return (
    <>
      <div className="flex justify-around">
        <Basic sketch={sketchA}></Basic>
        <Basic sketch={sketchB}></Basic>
      </div>
    </>
  );
};
```

</details>

</details>

<details class="mt-4">
<summary>正态分布与标准差</summary>
正态分布（也称为高斯分布）是统计学中一种重要的概率分布，其特点是对称、钟形曲线。在正态分布中，标准差是一个关键的参数，它衡量数据集中的值与平均值的离散程度。

标准差用来度量数据的离散程度，它越大表示数据的波动越大，越小表示数据的波动越小。标准差的计算公式如下：

$ \sigma = \sqrt{\frac{\sum\_{i=1}^{N}(x_i - \mu)^2}{N}} $

其中：

- $\sigma$ 是标准差，
- $N$ 是数据集中的观测值数量，
- $x_i$ 是每个观测值，
- $\mu$ 是数据集的平均值。

正态分布的特性之一是，约68%的数据在平均值附近的一个标准差范围内，约95%的数据在两个标准差范围内，约99.7%的数据在三个标准差范围内。

如果你有特定的数据集或问题，可以提供更多信息，我可以帮你更具体地理解和解释。

</details>

<details >
<summary>[randomGaussian 正态分布p5方法](https://p5js.org/reference/#/p5/randomGaussian)</summary>

import UseRandomGaussian from "@components/react/p5/Randomness/useRandomGaussian.tsx";

<UseRandomGaussian client:visible />

</details>

<details>
<summary>实践一个油漆飞溅模拟</summary>

import SimulatePaint from "@components/react/p5/Randomness/simulatePaint.tsx";

<SimulatePaint client:visible />

<details open class="!mt-4 ">
<summary>'完美'地在type=range的input使用了useDebouce</summary>

```tsx
import { useDebounce } from "@uidotdev/usehooks";
...
const debouncedSd = useDebounce(sd, 300);
    const sketch = useCallback(
        (p: p5) => {
            ...
        },
        [debouncedSd]
    );
    const handleSliderChange = (val: string) => {
        setSd(parseFloat(val));
    };

    return (
        <>
            <input
                type="range"
                value={sd}
                onChange={(e) => { handleSliderChange(e.target.value) }}
            />
            ...
        </>
```

</details>

</details>

## links

- https://natureofcode.com/
- https://p5js.org/
- https://processing.org/
- https://www.youtube.com/@TheCodingTrain
